Vagrant::Config.run do |config|
  <%= config_vm_box_name %>
  <%= config_vm_box_url %>
  # Boot with a GUI so you can see the screen. (Default is headless)
  # config.vm.boot_mode = :gui

  <%= config_network %>

  <%= config_portmapping %>

  <%= config_share_folders %>

  config.vm.provision :chef_client do |chef|

    chef.chef_server_url = "<%= APP_CONFIG[:chef_server_url] %>"
    chef.node_name = "<%= current_user.client_name %>"

    #currently not using the validation key because every user can create an own key using the web interface
    #chef.validation_key_path = "#{ENV['HOME']}/.chef/#{ENV['ORGNAME']}-validator.pem"
    #chef.validation_client_name = "#{ENV['ORGNAME']}-validator"
    <%= config_recipes %>
  end

  <%=  config_additional_configurations %>
end


