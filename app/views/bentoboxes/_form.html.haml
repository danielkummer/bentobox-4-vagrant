= form_for @bentobox do |f|
  -if @bentobox.errors.any?
    #error_explanation
      %h2= "#{pluralize(@bentobox.errors.count, "error")} prohibited this bentobox from being saved:"
      %ul
        - @bentobox.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :name
    = f.text_field :name
  .field
    = f.label :description
    = f.text_field :description
  .field
    = f.label :public
    = f.check_box :public

  .field
    = f.label :vagrantbox
    = f.collection_select( :vagrantbox, Vagrantbox.all, :id, :name, :prompt => true )

  .field
    = f.label :ingredient_ids, "Choose your ingredients"
    /= f.grouped_collection_select(:ingredient_ids, Category.all, :ingredients, :name, :id, :name, {}, {multiple: true})

    = hidden_field_tag "bentobox[ingredient_ids][]", nil
    - for category in Category.asc(:name)
      %fieldset
        %legend= category.name
        - for ingredient in category.ingredients.all
          .field
            = check_box_tag "bentobox[ingredient_ids][]", ingredient.id, @bentobox.ingredient_ids.include?(ingredient.id), id: dom_id(ingredient)
            = label_tag dom_id(ingredient), ingredient.name






  .actions
    = f.submit 'Save'
